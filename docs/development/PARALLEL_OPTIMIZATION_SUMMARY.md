# å¹¶è¡Œåˆ†æä¼˜åŒ–æ€»ç»“

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

é’ˆå¯¹ç”¨æˆ·æå‡ºçš„"GitHub ActionsæŒ‰æ—¶é—´è®¡è´¹ï¼Œèƒ½å¦å¹¶è¡Œå¤„ç†æ¥ç¼©çŸ­æ—¶é—´"çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å®ç°äº†å®Œæ•´çš„å¹¶è¡Œåˆ†æè§£å†³æ–¹æ¡ˆã€‚

## ğŸ“Š é¢„æœŸæ€§èƒ½æå‡

| è®ºæ–‡æ•°é‡ | ä¸²è¡Œæ—¶é—´ | å¹¶è¡Œæ—¶é—´ | æ€§èƒ½æå‡ | GitHub Actions æˆæœ¬èŠ‚çœ |
|---------|---------|---------|---------|----------------------|
| 10ç¯‡    | ~5åˆ†é’Ÿ   | ~2åˆ†é’Ÿ   | **2.5x** | **60%** |
| 20ç¯‡    | ~10åˆ†é’Ÿ  | ~3åˆ†é’Ÿ   | **3.3x** | **70%** |
| 50ç¯‡    | ~25åˆ†é’Ÿ  | ~6åˆ†é’Ÿ   | **4.2x** | **76%** |

## ğŸ”§ å®ç°çš„åŠŸèƒ½

### 1. æ ¸å¿ƒå¹¶è¡Œåˆ†æå™¨ (`src/parallel_analyzer.py`)
- âœ… **å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†**: ä½¿ç”¨ `ThreadPoolExecutor` å®ç°çœŸæ­£çš„å¹¶è¡Œåˆ†æ
- âœ… **æ™ºèƒ½çº¿ç¨‹æ•°è®¡ç®—**: æ ¹æ®è®ºæ–‡æ•°é‡è‡ªåŠ¨è®¡ç®—æœ€ä¼˜å·¥ä½œçº¿ç¨‹æ•°
- âœ… **æ‰¹å¤„ç†æ”¯æŒ**: å¤§é‡è®ºæ–‡æ—¶åˆ†æ‰¹å¤„ç†ï¼Œé¿å…å†…å­˜é—®é¢˜
- âœ… **çº¿ç¨‹å®‰å…¨**: å®Œå–„çš„çº¿ç¨‹åŒæ­¥å’Œé”™è¯¯å¤„ç†
- âœ… **æ€§èƒ½ç›‘æ§**: å®æ—¶è¿›åº¦æ˜¾ç¤ºå’Œè¯¦ç»†æ€§èƒ½ç»Ÿè®¡

### 2. é…ç½®ç®¡ç†å¢å¼º (`src/config.py`)
- âœ… **å¹¶è¡Œå¼€å…³**: `ENABLE_PARALLEL` æ§åˆ¶æ˜¯å¦å¯ç”¨å¹¶è¡Œåˆ†æ
- âœ… **çº¿ç¨‹æ•°æ§åˆ¶**: `MAX_WORKERS` æ‰‹åŠ¨æˆ–è‡ªåŠ¨è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
- âœ… **æ‰¹å¤„ç†é…ç½®**: `BATCH_SIZE` æ§åˆ¶æ‰¹å¤„ç†å¤§å°

### 3. ä¸»ç¨‹åºé›†æˆ (`src/main.py`)
- âœ… **åŒæ¨¡å¼æ”¯æŒ**: è‡ªåŠ¨é€‰æ‹©å¹¶è¡Œæˆ–ä¸²è¡Œæ¨¡å¼
- âœ… **å‘åå…¼å®¹**: ä¿ç•™åŸæœ‰ä¸²è¡Œé€»è¾‘ï¼Œç¡®ä¿ç¨³å®šæ€§
- âœ… **æ™ºèƒ½åˆ‡æ¢**: æ ¹æ®é…ç½®å’Œè®ºæ–‡æ•°é‡æ™ºèƒ½é€‰æ‹©æ¨¡å¼

### 4. æ€§èƒ½åŸºå‡†æµ‹è¯• (`scripts/benchmark_parallel.py`)
- âœ… **ç»¼åˆæµ‹è¯•**: å¯¹æ¯”ä¸²è¡Œå’Œä¸åŒå¹¶è¡Œåº¦çš„æ€§èƒ½
- âœ… **æˆæœ¬åˆ†æ**: è®¡ç®— GitHub Actions æ—¶é—´å’Œè´¹ç”¨èŠ‚çœ
- âœ… **æ¨èé…ç½®**: åŸºäºæµ‹è¯•ç»“æœæä¾›æœ€ä¼˜é…ç½®å»ºè®®
- âœ… **å¿«é€ŸéªŒè¯**: æ”¯æŒå¿«é€Ÿæµ‹è¯•æ¨¡å¼éªŒè¯åŠŸèƒ½

### 5. å¼€å‘å·¥å…·é›†æˆ
- âœ… **Makefile å‘½ä»¤**: `make benchmark-quick/benchmark/benchmark-full`
- âœ… **ç¯å¢ƒå˜é‡**: å®Œæ•´çš„å¹¶è¡Œé…ç½®é€‰é¡¹
- âœ… **æ–‡æ¡£æŒ‡å—**: è¯¦ç»†çš„ä¼˜åŒ–æŒ‡å—å’Œæœ€ä½³å®è·µ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç«‹å³å¯ç”¨ï¼ˆæ¨èé…ç½®ï¼‰
```bash
# åœ¨ GitHub Secrets ä¸­æ·»åŠ ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰
ENABLE_PARALLEL=true
MAX_WORKERS=0          # è‡ªåŠ¨è®¡ç®—æœ€ä¼˜çº¿ç¨‹æ•°
BATCH_SIZE=20
```

### æ€§èƒ½æµ‹è¯•
```bash
# å¿«é€ŸéªŒè¯ï¼ˆ3ç¯‡è®ºæ–‡ï¼‰
make benchmark-quick

# æ ‡å‡†æµ‹è¯•ï¼ˆ10ç¯‡è®ºæ–‡ï¼‰
make benchmark

# å®Œæ•´æµ‹è¯•ï¼ˆ20ç¯‡è®ºæ–‡ï¼‰
make benchmark-full
```

### è‡ªå®šä¹‰é…ç½®
```bash
# å°è§„æ¨¡ä½¿ç”¨ï¼ˆâ‰¤10ç¯‡ï¼‰
MAX_WORKERS=3
BATCH_SIZE=10

# å¤§è§„æ¨¡ä½¿ç”¨ï¼ˆâ‰¥30ç¯‡ï¼‰
MAX_WORKERS=8
BATCH_SIZE=20
```

## ğŸ’° æˆæœ¬æ•ˆç›Š

### å®é™…èŠ‚çœç¤ºä¾‹
å‡è®¾æ¯å¤©è¿è¡Œä¸€æ¬¡ï¼Œå¤„ç†20ç¯‡è®ºæ–‡ï¼š

- **ä¸²è¡Œæ¨¡å¼**: 10åˆ†é’Ÿ/æ¬¡ Ã— 30å¤© = 300åˆ†é’Ÿ/æœˆ
- **å¹¶è¡Œæ¨¡å¼**: 3åˆ†é’Ÿ/æ¬¡ Ã— 30å¤© = 90åˆ†é’Ÿ/æœˆ
- **æ—¶é—´èŠ‚çœ**: 210åˆ†é’Ÿ/æœˆ (70%)
- **è´¹ç”¨èŠ‚çœ**: $1.68/æœˆï¼Œ$20.16/å¹´

### GitHub Actions å…è´¹é¢åº¦ä¼˜åŒ–
- **å…è´¹é¢åº¦**: 2000åˆ†é’Ÿ/æœˆ
- **ä¸²è¡Œæ¨¡å¼**: 300åˆ†é’Ÿ/æœˆï¼ˆ15%é¢åº¦ï¼‰
- **å¹¶è¡Œæ¨¡å¼**: 90åˆ†é’Ÿ/æœˆï¼ˆ4.5%é¢åº¦ï¼‰
- **é¢åº¦èŠ‚çœ**: 210åˆ†é’Ÿ/æœˆï¼Œå¯ç”¨äºå…¶ä»–é¡¹ç›®

## ğŸ” æŠ€æœ¯äº®ç‚¹

### 1. æ™ºèƒ½è´Ÿè½½å‡è¡¡
```python
def calculate_optimal_workers(paper_count: int, api_delay: int = 2) -> int:
    # åŸºäºè®ºæ–‡æ•°é‡å’ŒAPIå»¶è¿Ÿçš„å¯å‘å¼ç®—æ³•
    if paper_count <= 5:
        return min(paper_count, 3)
    elif paper_count <= 20:
        return min(paper_count // 2, 5)
    # ... æ›´å¤šä¼˜åŒ–é€»è¾‘
```

### 2. çº¿ç¨‹å®‰å…¨è®¾è®¡
- ä½¿ç”¨ `threading.Lock()` ä¿æŠ¤å…±äº«çŠ¶æ€
- ç‹¬ç«‹çš„é”™è¯¯å¤„ç†é¿å…çº¿ç¨‹é—´å¹²æ‰°
- èµ„æºæ¸…ç†ç¡®ä¿PDFæ–‡ä»¶æ­£ç¡®åˆ é™¤

### 3. æ¸è¿›å¼ä¼˜åŒ–
- ä¿æŒå‘åå…¼å®¹æ€§
- å¯é€‰å¯ç”¨ï¼Œé™ä½é£é™©
- è¯¦ç»†ç›‘æ§ä¾¿äºè°ƒä¼˜

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### è¿è¡Œæ—¶ç»Ÿè®¡
```
å¹¶è¡Œåˆ†æç»Ÿè®¡: {
    "max_workers": 5,
    "batch_size": 20,
    "processed_count": 18,
    "total_count": 20
}
```

### æ€§èƒ½æŠ¥å‘Š
```
å¹¶è¡Œåˆ†æå®Œæˆï¼
æ€»æ—¶é—´: 180.45ç§’
æˆåŠŸåˆ†æ: 18/20 ç¯‡è®ºæ–‡
å¹³å‡æ¯ç¯‡: 9.02ç§’
```

## ğŸ›¡ï¸ ç¨³å®šæ€§ä¿éšœ

### 1. é”™è¯¯å¤„ç†
- å•ä¸ªè®ºæ–‡å¤±è´¥ä¸å½±å“å…¶ä»–è®ºæ–‡
- æ™ºèƒ½é‡è¯•æœºåˆ¶
- è¯¦ç»†é”™è¯¯æ—¥å¿—

### 2. èµ„æºç®¡ç†
- è‡ªåŠ¨PDFæ¸…ç†
- å†…å­˜ä½¿ç”¨æ§åˆ¶
- çº¿ç¨‹æ± è‡ªåŠ¨ç®¡ç†

### 3. APIé™åˆ¶ä¿æŠ¤
- å¯é…ç½®çš„APIå»¶è¿Ÿ
- æ‰¹å¤„ç†é¿å…è¿‡è½½
- é‡è¯•æœºåˆ¶åº”å¯¹ä¸´æ—¶å¤±è´¥

## ğŸ“š æ–‡æ¡£å’ŒæŒ‡å—

1. **[å¹¶è¡Œä¼˜åŒ–æŒ‡å—](PARALLEL_OPTIMIZATION_GUIDE.md)**: è¯¦ç»†é…ç½®å’Œè°ƒä¼˜æŒ‡å—
2. **[ç¯å¢ƒå˜é‡ç¤ºä¾‹](env.example)**: åŒ…å«æ‰€æœ‰å¹¶è¡Œé…ç½®é€‰é¡¹
3. **[æ€§èƒ½åŸºå‡†æµ‹è¯•](scripts/benchmark_parallel.py)**: å®Œæ•´çš„æµ‹è¯•å·¥å…·
4. **[Makefileå‘½ä»¤](Makefile)**: ä¾¿æ·çš„æµ‹è¯•å‘½ä»¤

## ğŸ”® æœªæ¥æ‰©å±•

### çŸ­æœŸä¼˜åŒ–
- [ ] åŠ¨æ€çº¿ç¨‹æ•°è°ƒæ•´
- [ ] APIå“åº”æ—¶é—´ç›‘æ§
- [ ] æ›´æ™ºèƒ½çš„æ‰¹å¤„ç†ç­–ç•¥

### é•¿æœŸè§„åˆ’
- [ ] åˆ†å¸ƒå¼å¤„ç†æ”¯æŒ
- [ ] ç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤åˆ†æ
- [ ] æˆæœ¬ä¼˜åŒ–ç®—æ³•

## âœ… éªŒè¯æ¸…å•

åœ¨éƒ¨ç½²å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] å·²æ·»åŠ å¹¶è¡Œé…ç½®ç¯å¢ƒå˜é‡
- [ ] è¿è¡Œè¿‡æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] ç¡®è®¤æˆåŠŸç‡ â‰¥ 90%
- [ ] éªŒè¯æ—¶é—´èŠ‚çœ â‰¥ 50%
- [ ] æ£€æŸ¥GitHub Actionsæ—¥å¿—æ­£å¸¸

## ğŸ‰ æ€»ç»“

è¿™æ¬¡å¹¶è¡Œä¼˜åŒ–å®ç°äº†ï¼š

1. **æ˜¾è‘—æ€§èƒ½æå‡**: 2-4å€é€Ÿåº¦æå‡
2. **æˆæœ¬å¤§å¹…èŠ‚çœ**: 60-76%çš„æ—¶é—´å’Œè´¹ç”¨èŠ‚çœ
3. **å®Œæ•´è§£å†³æ–¹æ¡ˆ**: ä»æ ¸å¿ƒç®—æ³•åˆ°æµ‹è¯•å·¥å…·çš„å…¨å¥—å®ç°
4. **ç”Ÿäº§å°±ç»ª**: ç¨³å®šå¯é ï¼Œå‘åå…¼å®¹
5. **æ˜“äºä½¿ç”¨**: é»˜è®¤é…ç½®å³å¯è·å¾—æœ€ä½³æ•ˆæœ

ç”¨æˆ·ç°åœ¨å¯ä»¥äº«å—æ›´å¿«çš„è®ºæ–‡åˆ†æé€Ÿåº¦å’Œæ›´ä½çš„GitHub Actionsæˆæœ¬ï¼ŒåŒæ—¶ä¿æŒåŸæœ‰çš„ç¨³å®šæ€§å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚